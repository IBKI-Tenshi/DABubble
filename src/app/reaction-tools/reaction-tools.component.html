<div class="reaction-tools-wrapper" [ngClass]="{ 'own': isOwn }">
  <!-- Quick reactions -->
  <div class="quick-reactions">
    <div class="quick-emoji" (click)="addQuickReaction('✅')" title="Grüner Haken">✅</div>
    <div class="quick-emoji" (click)="addQuickReaction('👍')" title="Daumen hoch">👍</div>
  </div>

  <!-- Emoji picker button -->
  <div class="icon more-emojis" (click)="togglePicker($event)" title="Weitere Emojis"></div>

  <!-- DM button -->
  <div class="icon dm" (click)="openDm()" title="Direktnachricht"></div>

  <!-- 3-dots menu (own messages only) -->
  <div class="icon menu" *ngIf="isOwn" (click)="toggleMenu($event)" title="Mehr Optionen"></div>

  <!-- Emoji picker -->
  <div *ngIf="showPicker"
       class="emoji-picker-container"
       [class.right-aligned]="!isOwn"
       [class.top-aligned]="shouldShowPickerOnTop"
       #emojiPicker
       (click)="$event.stopPropagation()">
    <emoji-mart
      [style]="{ width: '320px', height: '320px', padding: '0' }"
      [i18n]="{
        search: 'Suchen',
        categories: { people: 'Smileys', nature: 'Natur', foods: 'Essen', activity: 'Aktivitäten', objects: 'Objekte', symbols: 'Symbole' },
        notfound: 'Keine Emojis gefunden',
        searchResults: 'Suchergebnisse'
      }"
      title="Emoji auswählen"
      [darkMode]="false"
      [set]="'apple'"
      [enableFrequentEmojiSort]="false"
      [showPreview]="false"
      [emojiSize]="20"
      [perLine]="8"
      [include]="emojiCategories"
      [autoFocus]="false"
      [custom]="[]"
      (emojiClick)="addReaction($event)">
    </emoji-mart>
  </div>

  <!-- 3-dots dropdown -->
  <div *ngIf="showMenu" class="menu-options">
    <div class="menu-item" (click)="triggerEdit()">Nachricht bearbeiten</div>
  </div>
</div>
